import{r as n,f,o as D,j as O,w as i,k as t,D as E,l as r,v as P,m as J,n as T,t as W,A as q,h as R,F as K}from"./index-1e93b464.js";import{N as A,a as c}from"./FormItem-4c16bc59.js";import{a as d,b as H}from"./DataTable-f9ba7b1a.js";import{N as $}from"./LayoutContent-b6e046a1.js";const ee={__name:"index",setup(G){const S=n(null),F=n("medium"),e=n({selectValueProjectName:"广州粤芯半导体技术有限公司12英寸集成电路生产线项目总承包",selectValueProjectNames:["京东方B17项目180K扩产设计项目"],selectValueFilter1:"专业名称",selectValueFilter2:"",selectValueLv1:"",selectValueLv2:"",selectValueItemLv1:"",selectValueItemLv2:"",selectValueBuildingCategory:"",selectValueBuildingName:"",selectValuePackageName:"",selectValueFilterName1:"",selectValueFilterName2:"",selectValueFloorage:"建筑面积"}),C=f(()=>"分类1:"+(e.value.selectValueFilter1||"请先选择分类1")),L=f(()=>"分类2:"+(e.value.selectValueFilter2||"请先选择分类2")),z={selectValueProjectName:[{required:!0,trigger:["blur","change"],message:"请选择至少一个项目",validator:(l,a)=>(console.log("触发验证ProjectName",a),a.length==0?(console.log("触发验证ProjectName",a),new Error("需要选择至少一个项目")):!0)}]},u=n({filter1:["栋号名称","包名称","专业名称","一级系统","二级系统","一级物料","二级物料"].map(l=>({label:l,value:l})),filter2:["栋号名称","包名称","专业名称","一级系统","二级系统","一级物料","二级物料"].map(l=>({label:l,value:l})),floorageNames:["建筑面积","洁净面积","核心面积","精装面积","普装面积"].map(l=>({label:l,value:l}))}),_=f(()=>{let l=u.value.buildingNames;switch(console.log("当前分类1选择的是：",e.value.selectValueFilter1),e.value.selectValueFilter1){case"栋号名称":l=u.value.buildingNames;break;case"包名称":l=u.value.packageNames;break;case"专业名称":l=u.value.majorNames;break;case"一级系统":l=u.value.lv1;break;case"二级系统":l=u.value.lv2;break;case"一级物料":l=u.value.itemLv1;break;case"二级物料":l=u.value.itemLv2;break}return l}),B=f(()=>{let l=u.value.buildingNames;switch(console.log("当前分类2选择的是：",e.value.selectValueFilter2),e.value.selectValueFilter2){case"栋号名称":l=u.value.buildingNames;break;case"包名称":l=u.value.packageNames;break;case"专业名称":l=u.value.majorNames;break;case"一级系统":l=u.value.lv1;break;case"二级系统":l=u.value.lv2;break;case"一级物料":l=u.value.itemLv1;break;case"二级物料":l=u.value.itemLv2;break}return l});n([{label:"在这里选择要查询的项目的名称",value:"",disabled:!0}]);const v=({node:l,option:a})=>R(K,{placement:"right"},{trigger:()=>l,default:()=>a.label}),I=()=>{var l=[];return l};let U=n(0),w=n(0);const N=n(I()),m=n({page:1,pageSize:15,showSizePicker:!0,pageSizes:[15,30,50],prefix({itemCount:l}){return`共计 ${l}条数据`},onUpdatePageSize:l=>{m.value.pageSize=l,m.value.page=1}}),h=new Intl.NumberFormat("en-US"),V=n([]);async function b(l){const a=await E.post("/DataTools/IndicatorComparision",{projectName:e.value.selectValueProjectName||"",projectNames:e.value.selectValueProjectNames||["京东方B17项目180K扩产设计项目"],buildingCategory:e.value.selectValueBuildingCategory||"",filter1:e.value.selectValueFilter1||"",filter2:e.value.selectValueFilter2||"",filterName1:e.value.selectValueFilterName1||"",filterName2:e.value.selectValueFilterName2||"",areaCategory:e.value.selectValueFloorage||"建筑面积",page:l,pageSize:m.value.pageSize});m.value.itemCount=a.total,m.value.page=a.page,m.value.pageSize=a.pageSize,m.value.pageCount=a.pageCount,console.log("res data is",a),console.log("当前返回数据是：",JSON.parse(a.data));let o=JSON.parse(a.data);N.value=[],U.value=a.total_price_sum,w.value=a.total_floorage_sum,console.log("当前选择的面积类型是：",e.value.selectValueFloorage),V.value=[{title:"分类1",key:"filter1",minWidth:60},{title:"分类2",key:"filter2",minWidth:60},{title:e.value.selectValueProjectName+"单方造价（元/m2）",key:"costIndicator",minWidth:100,align:"right",render:s=>h.format(s.costIndicator)}];for(let s=0;s<e.value.selectValueProjectNames.length;s++)V.value.push({title:e.value.selectValueProjectNames[s]+"单方造价（元/m2）",key:"costIndicator"+s,minWidth:100,align:"right",render:p=>h.format(p["costIndicator"+s])});o.forEach(s=>{var k,y;let p={filter1:s[e.value.selectValueFilter1],filter2:s[e.value.selectValueFilter2],costIndicator:((k=s[e.value.selectValueProjectName+"单方造价"])==null?void 0:k.toFixed(2))||0};for(let g=0;g<e.value.selectValueProjectNames.length;g++)console.log("当前数据的项目是：",e.value.selectValueProjectNames[g]),p["costIndicator"+g]=((y=s[e.value.selectValueProjectNames[g]+"单方造价"])==null?void 0:y.toFixed(2))||0;N.value.push(p)}),["projectNames","lv1","lv2","itemLv1","itemLv2","majorNames","packageNames","buildingNames","buildingCategory"].forEach(s=>{u.value[s]=[],JSON.parse(a[s]).forEach(p=>{p&&u.value[s].push({label:p,value:p})})})}b(1);async function j(){b(1)}async function x(l){b(l)}return(l,a)=>(D(),O(t(q),null,{default:i(()=>[r(t(P),{justify:"space-between",align:"center"}),r(t(W),null,{default:i(()=>[r(t(P),null,{default:i(()=>[r(t(A),{inline:"",ref_key:"formRef",ref:S,model:e.value,rules:z,"require-mark-placement":"right-hanging",size:F.value},{default:i(()=>[r(t(c),{label:"项目名称",path:"selectValueProjectName"},{default:i(()=>[r(t(d),{filterable:"",value:e.value.selectValueProjectName,"onUpdate:value":a[0]||(a[0]=o=>e.value.selectValueProjectName=o),placeholder:"Select",options:u.value.projectNames,"render-option":v},null,8,["value","options"])]),_:1}),r(t(c),{label:"栋号分类",path:"selectValueBuildingCategory"},{default:i(()=>[r(t(d),{filterable:"",value:e.value.selectValueBuildingCategory,"onUpdate:value":a[1]||(a[1]=o=>e.value.selectValueBuildingCategory=o),placeholder:"Select",options:u.value.buildingCategory,"render-option":v,clearable:""},null,8,["value","options"])]),_:1}),r(t(c),{label:"分类1",path:"selectValueFilter1"},{default:i(()=>[r(t(d),{filterable:"",value:e.value.selectValueFilter1,"onUpdate:value":a[2]||(a[2]=o=>e.value.selectValueFilter1=o),placeholder:"Select",options:u.value.filter1,"render-option":v},null,8,["value","options"])]),_:1}),r(t(c),{label:C.value,path:"selectValueFilterName1"},{default:i(()=>[r(t(d),{filterable:"",value:e.value.selectValueFilterName1,"onUpdate:value":a[3]||(a[3]=o=>e.value.selectValueFilterName1=o),placeholder:"Select",options:_.value,"render-option":v,clearable:""},null,8,["value","options"])]),_:1},8,["label"]),r(t(c),{label:"面积",path:"selectValueFloorage"},{default:i(()=>[r(t(d),{filterable:"",value:e.value.selectValueFloorage,"onUpdate:value":a[4]||(a[4]=o=>e.value.selectValueFloorage=o),placeholder:"Select",options:u.value.floorageNames,"render-option":v},null,8,["value","options"])]),_:1}),r(t(c),{label:"分类2",path:"selectValueFilter2"},{default:i(()=>[r(t(d),{filterable:"",value:e.value.selectValueFilter2,"onUpdate:value":a[5]||(a[5]=o=>e.value.selectValueFilter2=o),placeholder:"Select",options:u.value.filter2,"render-option":v,clearable:""},null,8,["value","options"])]),_:1}),r(t(c),{label:L.value,path:"selectValueFilterName2"},{default:i(()=>[r(t(d),{filterable:"",value:e.value.selectValueFilterName2,"onUpdate:value":a[6]||(a[6]=o=>e.value.selectValueFilterName2=o),placeholder:"Select",options:B.value,"render-option":v,clearable:""},null,8,["value","options"])]),_:1},8,["label"]),r(t(c),null,{default:i(()=>[r(t(J),{disabled:e.value.selectValueProjectName.length==0,type:"primary",onClick:j},{default:i(()=>[T(" 搜索 ")]),_:1},8,["disabled"])]),_:1})]),_:1},8,["model","size"])]),_:1}),r(t(c),{label:"添加对比项目",path:"selectValueProjectNames","label-placement":"left"},{default:i(()=>[r(t(d),{filterable:"",value:e.value.selectValueProjectNames,"onUpdate:value":[a[7]||(a[7]=o=>e.value.selectValueProjectNames=o),j],placeholder:"Select",multiple:"",options:u.value.projectNames,"render-option":v,"max-tag-count":1,clearable:""},null,8,["value","options"])]),_:1})]),_:1}),r(t($),{"native-scrollbar":!1},{default:i(()=>[r(t(H),{remote:"",ref:"table",columns:V.value,data:N.value,pagination:m.value,size:F.value,"single-line":!1,"onUpdate:page":x,"max-height":"380"},null,8,["columns","data","pagination","size"])]),_:1})]),_:1}))}};export{ee as default};
